<h2>Merchant: <%= @merchant.username %> </h2>

<h4>Profile</h4>
<ul>
  <li>
    <strong>ID:</strong> <%= @merchant.id %>
  </li>

  <li>
    <strong>Email:</strong> <%= @merchant.email %>
  </li>
</ul>

<h4>Actions</h4>

<%= link_to "Create new category", new_category_path %>
<%= link_to "Create new product", new_merchant_product_path(@merchant, @products) %>

<%# Tried Alicia's suggested edit here, but it broke the tests. %>
<% if @login_merchant && @login_merchant.id == session[:user_id] %>
    <%= link_to "Order Fulfillment Dashboard", merchant_order_items_path(@merchant) %>
<% end %>

<h4>Products</h4>
  <table class="table">
    <thead class="thead-light">
      <tr>
        <th>Name</th>
        <th>Inventory</th>
        <th>Price</th>
        <th>Active</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
    <% @products.each do |product| %>
      <% product_state = (product.active ? "Retire Product" : "Reactivate Product") %>
      <tr>
        <td><%= link_to "#{product.name}", merchant_products_path(@merchant, product.id) %></td>
        <td><%= product.inventory %></td>
        <td><%= number_to_currency(product.price) %></td>
        <td><%= product.active %></td>
        <td class="row">
          <%= link_to "Edit", edit_product_path(product.id), class: "btn btn-info" %>
          <%= button_to product_state, toggle_active_path(product.id), class: "btn btn-warning", data: { confirm: "Are you sure you'd like to #{product_state.downcase}?"}, method: :patch %>
          <%= button_to "Delete", product_path(product.id), class: "btn btn-danger", data: { confirm: "Are you sure you'd like to delete this product?"}, method: :delete %>
        </td>
      </tr>
    <% end %>
    </tbody>
  </table>
