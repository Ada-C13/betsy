<% content_for(:headline) { "Product Details"} %>

<div class="show-product__details container">
  <div class="row">

    <div class="col-md-6">
    <%= image_tag(@product.photo, class: "img-fluid") %>
    </div>

    <div class="col-md-6">
      <h3><%= @product.name %> - <span class="show-product__price"><%= number_to_currency(@product.price) %></span></h3>
      <p><%= @product.description %></p>
      <div class='top_buttons'>
        <%= button_to 'Add to cart', create_order_items_path(@product), class: 'btn btn-primary btn-lg' %>
        <%= button_to 'Leave a Review', new_product_review_path(@product), method: :get, class: 'btn btn-secondary btn-md' %>
      </div>
      <br>
      <%= button_to 'Back to Products', products_path, class: 'btn btn-outline-secondary btn-md' %>
      
    </div>

  </div>

<div class="review_container">
  <% unless product_owned_by_merchant?(@product) %> 
    <p>
      <%= rating_as_stars(rating_average(@product.reviews)) %>
      (<%= rating_count(@product.reviews) %>)
      <%= rating_count(@product.reviews) == 0 ? "No reviews for " : "Reviews for "%><%= @product.name %> 
    </p>
  <% end %>

  <% @product.reviews.each do |review| %>
    <div class="reviews">
      <p><%= rating_as_stars(review.rating) %> on <%= review.created_at.strftime('%-d %B %Y') %> <%= review.comment %> </p>
    </div>
    <% end %> 
  </div>
</div>
