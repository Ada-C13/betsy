<!DOCTYPE html>
<html>
  <head>
    <title>Nooksy</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
    <%= favicon_link_tag 'https://i.ibb.co/Fzk7PdR/tom.png' %>
    
  </head>
  <%
=begin%>
 removes navigation and other styling for splash page 
<%
=end%>
  <% unless controller_name == "pages" %>
  <body class="body">
    <header class="navbar navbar-expand-lg navbar-light bg-light">
      
        <nav>

          <h1><%= link_to "Nooksy", root_path, class: "navbar-brand" %></h1>

          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
              <li><%= link_to "All Products", products_path, class: "nav-link" %> </li>
              <li><%= link_to "All Merchants", users_path, class: "nav-link" %> </li>
              <li><%= link_to "Products by Category", products_path, class: "nav-link dropdown-toggle" %> </li>
    

<%# https://stackoverflow.com/questions/22849913/ruby-on-rails-navigation-with-dynamic-content  %>

              <li class="dropdown">
                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Browse by Merchant<b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <% User.all.each do |user| %>
                    <li><%= link_to user.name, user %></li>
                  <% end %>
                </ul>
              </li> 
              <li>
              <% if @login_user %>
                <%= link_to "My dashboard", users_path, class: "nav-link" %> 
              <% end %>
              </li> 
            </ul>
          <ul class="navbar-nav mr-auto">
            <li class="nav-item app-header__nav_item">
              <% if @login_user %>
                <%= link_to "Logged in as #{@login_user.name}", logout_path, method: "delete", class: "nav-link" %>
              <% else %>
                <%= link_to "Login with Github", github_login_path, class: "nav-link" %>
              <% end %>
            </li>
          </ul>
          </div>

          <%= form_tag(search_path, method: :get) do %>
            <%= text_field_tag(:search, params[:search]) %>
            <%= submit_tag("Search") %>
          <% end %>
        </nav>
      </header>
      <% end %>
    <div class="content">
    <%= yield %>
    </div>
  </main>
  </body>
</html>
